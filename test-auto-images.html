<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            background: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        .test-button {
            background: #ff6b35;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .test-button:hover {
            background: #e55a2b;
        }
        .test-result {
            background: #333;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
        }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
        .info { color: #2196F3; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h1>
    
    <div class="test-section">
        <h2>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é</h2>
        <p><strong>–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É:</strong></p>
        <ol>
            <li>–û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É <code>index.html</code></li>
            <li>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –æ—Ä–∞–Ω–∂–µ–≤—É—é –∫–Ω–æ–ø–∫—É –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏</li>
            <li>–ü–æ–º–µ—Å—Ç–∏—Ç–µ –Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø–∞–ø–∫–∏:
                <ul>
                    <li><code>images/portraits/</code> - –¥–ª—è –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤</li>
                    <li><code>images/landscapes/</code> - –¥–ª—è –ø–µ–π–∑–∞–∂–µ–π</li>
                    <li><code>images/characters/</code> - –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π</li>
                    <li><code>images/tattoos/</code> - –¥–ª—è —Ç–∞—Ç—É–∏—Ä–æ–≤–æ–∫</li>
                </ul>
            </li>
            <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –≥–∞–ª–µ—Ä–µ–∏" –∏–ª–∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>üîß –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <button class="test-button" onclick="testImageDiscovery()">–¢–µ—Å—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</button>
        <button class="test-button" onclick="testAddImage()">–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</button>
        <button class="test-button" onclick="testRefresh()">–û–±–Ω–æ–≤–∏—Ç—å –≥–∞–ª–µ—Ä–µ–∏</button>
        <button class="test-button" onclick="testMonitoring()">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</button>
        
        <div id="test-results" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h2>
        <div id="system-status" class="test-result">
            <div class="info">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–∞...</div>
        </div>
    </div>

    <div class="test-section">
        <h2>üí° –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã</h2>
        <ul>
            <li>JPG / JPEG</li>
            <li>PNG</li>
            <li>WebP</li>
            <li>GIF</li>
        </ul>
        <p><strong>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è:</strong></p>
        <ul>
            <li>photo_2025-*.jpg</li>
            <li>IMG_*.jpg</li>
            <li>DSC_*.jpg</li>
            <li>P*.jpg</li>
            <li>image*.jpg</li>
            <li>pic*.jpg</li>
            <li>photo*.jpg</li>
            <li>*.jpg, *.jpeg, *.png, *.webp, *.gif</li>
        </ul>
    </div>

    <script>
        function log(message, type = 'info') {
            const results = document.getElementById('test-results');
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : 'info';
            results.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            results.scrollTop = results.scrollHeight;
        }

        function testImageDiscovery() {
            log('üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...', 'info');
            
            if (typeof window.discoverImagesInFolder === 'function') {
                log('‚úÖ –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø–Ω–∞', 'success');
                
                // –¢–µ—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                const categories = ['portraits', 'landscapes', 'characters', 'tattoos'];
                categories.forEach(async (category) => {
                    try {
                        const folderPath = `images/${category}/`;
                        const galleryId = `${category}-gallery`;
                        const images = await window.discoverImagesInFolder(folderPath, galleryId);
                        log(`üìÅ ${category}: –Ω–∞–π–¥–µ–Ω–æ ${images.length} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π`, images.length > 0 ? 'success' : 'info');
                        if (images.length > 0) {
                            log(`   –§–∞–π–ª—ã: ${images.join(', ')}`, 'info');
                        }
                    } catch (error) {
                        log(`‚ùå –û—à–∏–±–∫–∞ –≤ ${category}: ${error.message}`, 'error');
                    }
                });
            } else {
                log('‚ùå –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'error');
            }
        }

        function testAddImage() {
            log('üì∏ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è...', 'info');
            
            if (typeof window.addImageByName === 'function') {
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                window.addImageByName('test-image.jpg', 'portraits');
                log('‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –ø–æ—Ä—Ç—Ä–µ—Ç—ã', 'success');
            } else {
                log('‚ùå –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'error');
            }
        }

        function testRefresh() {
            log('üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–∞–ª–µ—Ä–µ–π...', 'info');
            
            if (typeof window.refreshAllGalleries === 'function') {
                window.refreshAllGalleries();
                log('‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–π –∑–∞–ø—É—â–µ–Ω–æ', 'success');
            } else {
                log('‚ùå –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–∞–ª–µ—Ä–µ–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'error');
            }
        }

        function testMonitoring() {
            log('üëÅÔ∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞...', 'info');
            
            if (typeof window.toggleImageMonitoring === 'function') {
                window.toggleImageMonitoring();
                const status = window.monitoringEnabled ? '–í–ö–õ' : '–í–´–ö–õ';
                log(`‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω: ${status}`, 'success');
            } else {
                log('‚ùå –§—É–Ω–∫—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'error');
            }
        }

        function updateSystemStatus() {
            const statusDiv = document.getElementById('system-status');
            let status = '<div class="info">üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:</div>';
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π
            const functions = [
                'discoverImagesInFolder',
                'addImageByName', 
                'refreshAllGalleries',
                'toggleImageMonitoring',
                'startImageMonitoring'
            ];
            
            functions.forEach(func => {
                const available = typeof window[func] === 'function';
                const className = available ? 'success' : 'error';
                const icon = available ? '‚úÖ' : '‚ùå';
                status += `<div class="${className}">${icon} ${func}</div>`;
            });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
            if (window.monitoringEnabled !== undefined) {
                const monitoringStatus = window.monitoringEnabled ? '–í–ö–õ' : '–í–´–ö–õ';
                const className = window.monitoringEnabled ? 'success' : 'info';
                status += `<div class="${className}">üëÅÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: ${monitoringStatus}</div>`;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            if (window.discoveredImages) {
                status += '<div class="info">üìÅ –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</div>';
                Object.keys(window.discoveredImages).forEach(gallery => {
                    const count = window.discoveredImages[gallery].length;
                    status += `<div class="info">   ${gallery}: ${count} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</div>`;
                });
            }
            
            statusDiv.innerHTML = status;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
        setInterval(updateSystemStatus, 5000);
        updateSystemStatus();

        log('üß™ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'success');
        log('üí° –û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É index.html –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', 'info');
    </script>
</body>
</html>
